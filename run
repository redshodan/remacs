#!/bin/sh

export PATH=.:$PATH

rm -f client.log ~/server.log sslclient.log sslserver.log

if [ "$1" = "emacs" ]; then
    # exec emacs -nw -q elisp/remacs.el --eval "(progn (fset 'yes-or-no-p 'y-or-n-p)(eval-buffer (get-buffer \"remacs.el\"))(remacs-test))"
    exec emacs -nw -q --eval "(progn (add-to-list 'load-path \"elisp\")(find-file-noselect \"elisp/remacs.el\" t)(eval-buffer (get-buffer \"remacs.el\"))(remacs-test))"
elif [ "$1" = "sslserver" ]; then
    ./remacs -sS -c certs/server1.pem -C certs/cacert1.pem -i server1
elif [ "$1" = "sslclient" ]; then
    ./remacs -S -c certs/client1.pem -C certs/cacert1.pem -i client1 localhost
fi
